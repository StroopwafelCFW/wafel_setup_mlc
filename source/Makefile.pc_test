# Makefile for PC-based testing of xml_utils

# Compiler and flags
CC = gcc
CFLAGS = -Wall -Wextra -g -I. # -I. to find xml_utils.h in the current dir (source/)
LDFLAGS =

# Source files
XML_UTILS_SRC = xml_utils.c
TEST_SRC = test_xml_utils.c

# Object files
XML_UTILS_OBJ = $(XML_UTILS_SRC:.c=.o)
TEST_OBJ = $(TEST_SRC:.c=.o)

# Target executable
TEST_EXEC = test_xml_utils_pc

.PHONY: all run clean

all: $(TEST_EXEC)

$(TEST_EXEC): $(XML_UTILS_OBJ) $(TEST_OBJ)
	$(CC) $(CFLAGS) -o $(TEST_EXEC) $(XML_UTILS_OBJ) $(TEST_OBJ) $(LDFLAGS)

%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

run: all
	@echo "Running tests..."
	@./$(TEST_EXEC)

clean:
	@echo "Cleaning up..."
	@rm -f $(XML_UTILS_OBJ) $(TEST_OBJ) $(TEST_EXEC)
	@echo "Done."
